<!DOCTYPE html>
<html>

<head>
    <title>FYP</title>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="stylesheet" href="static/style.css">
    <script src="script.js"></script>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.3/css/bulma.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <link href="static/font-awesome/css/all.css" rel="stylesheet">
</head>

<body>
    <nav class="navbar is-fixed-top" role="navigation" aria-label="main navigation">
        <div class="navbar-brand">
            <h3 class="title is-3 fyp">Four Year Plan</h3>
        </div>

        <div class="field">
            <form role="form">
                <div class="form-group navbar-item has-dropdown is-active">
                    <div class="control has-icons-left" id="searchbar">
                        <input class="input" id="txt-search" type="input" placeholder="Search For A Course" value=''>
                        <span class="icon is-small is-left">
                            <i class="fas fa-search"></i>
                        </span>
                        <div class="navbar-dropdown" id="filter-records"></div>
                    </div>
                </div>
            </form>
        </div>
    </nav>

    <div class="container"><br><br><br>
        <div class="row">
            <div class="columns is-vcentered">
                <div class="column">
                    <h4 class="title is-4">Freshman</h4>
                    <h5 class="subtitle is-5">Fall</h5>
                    <div class="card sem" ondrop="drop(event, fall1)" ondragover="allowDrop(event)">
                        <div id="fall1">
                            <div class="card drag" id="EN500112" draggable="true" ondragstart="drag(event)" style="background-color: #b0d1f3;
                        color: white;">
                                <button class="delete is-small" id="dEN500112"
                                    onclick="deleteCourse('EN500112');"></button>
                                <div class="card-content">
                                    EN.500.112<br>
                                    Gateway Computing: Java (3)
                                </div>
                            </div>

                            <div class="card drag" id="EN601104" draggable="true" ondragstart="drag(event)" style="background-color: #2374C7;
                        color: white;">
                                <button class="delete is-small" id="dEN601104"
                                    onclick="deleteCourse('EN601104');"></button>
                                <div class="card-content">
                                    EN.601.104<br>
                                    Computer Ethics (1)
                                </div>
                            </div>
                        </div>
                        <footer class="card-footer card-footer-padding">
                            <p class="credits" id="cfall1">4 credits</p>
                        </footer>
                    </div><br>
                </div>
                <div class="column">
                    <h5 class="subtitle is-5">Spring</h5>
                    <div class="card sem" ondrop="drop(event, spring1)" ondragover="allowDrop(event)">
                        <div id="spring1">
                            <div class="card drag" id="EN601220" draggable="true" ondragstart="drag(event)" style="background-color: #2374C7;
                        color: white;">
                                <button class="delete is-small" id="dEN601220"
                                    onclick="deleteCourse('EN601220');"></button>
                                <div class="card-content">
                                    EN.601.220<br>
                                    Intermediate Programming (4)
                                </div>
                            </div>
                        </div>
                        <footer class="card-footer card-footer-padding">
                            <p class="credits" id="cspring1">4 credits</p>
                        </footer>
                    </div>
                </div>
                <div class="column">
                    <h4 class="title is-4">Sophomore</h4>
                    <h5 class="subtitle is-5">Fall</h5>
                    <div class="card sem" ondrop="drop(event, fall2)" ondragover="allowDrop(event)">
                        <div id="fall2">
                            <div class="card drag" id="EN601226" draggable="true" ondragstart="drag(event)" style="background-color: #2374C7;
                        color: white;">
                                <button class="delete is-small" id="dEN601226"
                                    onclick="deleteCourse('EN601226');"></button>
                                <div class="card-content">
                                    EN.601.226<br>
                                    Data Structures (4)
                                </div>
                            </div>

                            <div class="card drag" id="EN601229" draggable="true" ondragstart="drag(event)" style="background-color: #2374C7;
                        color: white;">
                                <button class="delete is-small" id="dEN601229"
                                    onclick="deleteCourse('EN601229');"></button>
                                <div class="card-content">
                                    EN.601.229<br>
                                    Computer System Fundamentals (3)
                                </div>
                            </div>
                        </div>
                        <footer class="card-footer card-footer-padding">
                            <p class="credits" id="cfall2">7 credits</p>
                        </footer>
                    </div><br>
                </div>
                <div class="column">
                    <h5 class="subtitle is-5">Spring</h5>
                    <div class="card sem" ondrop="drop(event, spring2)" ondragover="allowDrop(event)">
                        <div id="spring2">
                            <div class="card drag" id="EN601230" draggable="true" ondragstart="drag(event)" style="background-color: #2374C7;
                        color: white;">
                                <button class="delete is-small" id="dEN601230"
                                    onclick="deleteCourse('EN601230');"></button>
                                <div class="card-content">
                                    EN.601.230<br>
                                    Mathematical Foundations for CS (4)
                                </div>
                            </div>
                        </div>
                        <footer class="card-footer card-footer-padding">
                            <p class="credits" id="cspring2">4 credits</p>
                        </footer>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="columns is-vcentered">

                    <div class="column">
                        <h4 class="title is-4">Junior</h4>
                        <h5 class="subtitle is-5">Fall</h5>
                        <div class="card sem" ondrop="drop(event, fall3)" ondragover="allowDrop(event)">
                            <div id="fall3">
                                <div class="card drag" id="EN601433" draggable="true" ondragstart="drag(event)" style="background-color: #2374C7;
                        color: white;">
                                    <button class="delete is-small" id="dEN601433"
                                        onclick="deleteCourse('EN601433');"></button>
                                    <div class="card-content">
                                        EN.601.433<br>
                                        Intro to Algorithms (3)
                                    </div>
                                </div>
                            </div>
                            <footer class="card-footer card-footer-padding">
                                <p class="credits" id="cfall3">3 credits</p>
                            </footer>
                        </div><br>
                    </div>
                    <div class="column">
                        <h5 class="subtitle is-5">Spring</h5>
                        <div class="card sem" ondrop="drop(event, spring3)" ondragover="allowDrop(event)">
                            <div id="spring3"></div>
                            <footer class="card-footer card-footer-padding">
                                <p class="credits" id="cspring3">0 credits</p>
                            </footer>
                        </div>
                    </div>
                    <div class="column">
                        <h4 class="title is-4">Senior</h4>
                        <h5 class="subtitle is-5">Fall</h5>
                        <div class="card sem" ondrop="drop(event, fall4)" ondragover="allowDrop(event)">
                            <div id="fall4"></div>
                            <footer class="card-footer card-footer-padding">
                                <p class="credits" id="cfall4">0 credits</p>
                            </footer>
                        </div><br>
                    </div>
                    <div class="column">
                        <h5 class="subtitle is-5">Spring</h5>
                        <div class="card sem" ondrop="drop(event, spring4)" ondragover="allowDrop(event)">
                            <div id="spring4"></div>
                            <footer class="card-footer card-footer-padding">
                                <p class="credits" id="cspring4">0 credits</p>
                            </footer>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- <button class="button is-info" style="float: right;"><strong>What If?</strong></button> -->
        <h4 class="title is-4" id="total" style="float: right; padding: 5px; padding-right: 10px;">22.0 credits</h4>
        <br><br><br>
    </div>

    <script>
        var url = 'https://gentle-spire-48513.herokuapp.com/https://sis.jhu.edu/api/classes?key=JjHPAfkaB7SZpfX6MnQIXXHMGARAHR8x&School=Whiting%20School%20of%20Engineering&Term=Fall%202021';
        var SISdata = fetchJSON(url);
    </script>

    <script type="text/javascript">
        console.log(data);

        $('#txt-search').keyup(function () {
            var searchField = $(this).val();
            if (searchField === '') {
                document.getElementById("filter-records").style.display = "none";
                $('#filter-records').html('');
                return;
            }

            let code, title, credits, year;

            var regex = new RegExp(searchField, "i");
            var output = '<div class="row">';

            $.each(data, function (key, val) {
                document.getElementById("filter-records").style.display = "block";

                if ((val.OfferingName.search(regex) != -1) || (val.Title.search(regex) != -1)) {
                    // code = val.OfferingName;
                    // code = code.substring(0, 2) + code.substring(3, 6) + code.substring(7);
                    
                    output += '<a class=\"panel-block navbar-item\" onclick=\"addCourse(\'' + val.OfferingName + '\',\'' + val.Title + '\',\'' + val.Credits + '\',\'' + val.Areas + '\');\">' + '<div class=\"control\">' + '<h5 class=\"title is-6\">' + val.OfferingName + '</h5>' + '<p class=\"subtitle is-6\">' + val.Title + " (" + val.Credits + ")" + '</p>' + '</div>' + '</a>';
                }
            });
            output += '</div>';
            $('#filter-records').html(output);
        });
    </script>
</body>

</html>